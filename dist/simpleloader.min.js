!function($,f){"use strict";function t(a,c,i){var t=e[a];if(t||(t={url:a,deferred:$.ajax($.extend({url:n+a+r},c))},e[a]=t),i){if("resolved"===t.deferred.state())return void i();$.when(t.deferred).done(function(){i()})}}function a(n){var t=n.shift();c["get"+o(t.url)](t.url),$.when(e[t.url].deferred).done(function(){t.deferred.resolve(),n.length&&a(n)}).fail(function(){t.deferred.reject()})}function o(t){var n=t.split(".").pop().split("?").shift(),e="";switch(n){case"js":e="Script";break;case"css":e="CSS";break;case"jpg":e="Image";break;case"png":e="Image";break;case"gif":e="Image";break;default:e="Script"}return e}function i(e){var r=[],t=[],i=[],n=function(e){$.isArray(e)?$.merge(t,e):t.push(e)};e.load&&n(e.load),e.test&&e.yep&&n(e.yep),!e.test&&e.nope&&n(e.nope),$.each(t,function(n,t){var e=$.Deferred();r.push(e),i.push({url:t,deferred:e})}),a(i),$.when.apply(f,r).done(function(){e.complete&&e.complete()}).fail(function(){e.fail&&e.fail()})}var e={},n="",r="",c={getScript:function(e,n){t(e,{dataType:"script",cache:!0},n)},getCSS:function(a,i){t(a,{cache:!0},i),$.when(e[a].deferred).done(function(){$("<link>").appendTo($("head")).attr({type:"text/css",rel:"stylesheet"}).attr("href",n+a+r)})},getImage:function(e,n){t(e,{},n)},setBaseUrl:function(e){n=e},setSufix:function(e){r=e}};$.extend(i,c),$.wk=$.wk||{},$.wk.load=i}(window.jQuery||window.Zepto,window);