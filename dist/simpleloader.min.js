!function($,c){"use strict";function t(i,o,a){var t=e[i];if(t||(t={url:i,deferred:$.ajax($.extend({url:n+i+r},o))},e[i]=t),a){if("resolved"===t.deferred.state())return void a();$.when(t.deferred).done(function(){a()})}}function i(n){var t=n.shift();o["get"+f(t.url)](t.url),$.when(e[t.url].deferred).done(function(){t.deferred.resolve(),n.length&&i(n)}).fail(function(){t.deferred.reject()})}function f(t){var n=t.split(".").pop().split("?").shift(),e="";switch(n){case"js":e="Script";break;case"css":e="CSS";break;case"jpg":e="Image";break;case"png":e="Image";break;case"gif":e="Image";break;default:e="Script"}return e}function a(e){var a=[],t=[],n=[],r=function(e){$.isArray(e)?$.merge(t,e):t.push(e)};return e.load&&r(e.load),e.test&&e.yep&&r(e.yep),!e.test&&e.nope&&r(e.nope),$.each(t,function(r,t){var e=$.Deferred();a.push(e),n.push({url:t,deferred:e})}),0===n.length?void(e.complete&&e.complete()):(i(n),void $.when.apply(c,a).done(function(){e.complete&&e.complete()}).fail(function(){e.fail&&e.fail()}))}var e={},n="",r="",o={getScript:function(e,n){t(e,{dataType:"script",cache:!0},n)},getCSS:function(i,a){t(i,{cache:!0},a),$.when(e[i].deferred).done(function(){$("<link>").appendTo($("head")).attr({type:"text/css",rel:"stylesheet"}).attr("href",n+i+r)})},getImage:function(e,n){t(e,{},n)},setBaseUrl:function(e){n=e},setSufix:function(e){r=e}};$.extend(a,o),$.wk=$.wk||{},$.wk.load=a}(window.jQuery||window.Zepto,window);